{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Slurm\u6587\u6863\u9996\u9875","text":""},{"location":"#_1","title":"\u7b80\u4ecb","text":"<ul> <li>Slurm(Simple Linux Utility for Resource Management\uff0c\u00a0http://slurm.schedmd.com/\u00a0)\u662f\u5f00\u6e90\u7684\u3001\u5177\u6709\u5bb9\u9519\u6027\u548c\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684Linux\u96c6\u7fa4\u8d85\u7ea7\u8ba1\u7b97\u7cfb\u7edf\u8d44\u6e90\u7ba1\u7406\u548c\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf</li> <li>\u8d85\u7ea7\u8ba1\u7b97\u7cfb\u7edf\u53ef\u5229\u7528Slurm\u5bf9\u8d44\u6e90\u548c\u4f5c\u4e1a\u8fdb\u884c\u7ba1\u7406\uff0c\u4ee5\u907f\u514d\u76f8\u4e92\u5e72\u6270\uff0c\u63d0\u9ad8\u8fd0\u884c\u6548\u7387</li> <li>\u6240\u6709\u9700\u8fd0\u884c\u7684\u4f5c\u4e1a\uff0c\u65e0\u8bba\u662f\u7528\u4e8e\u7a0b\u5e8f\u8c03\u8bd5\u8fd8\u662f\u4e1a\u52a1\u8ba1\u7b97\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u4ea4\u4e92\u5f0f\u5e76\u884c\u00a0srun\u00a0\u3001\u6279\u5904\u7406\u5f0f\u00a0sbatch\u00a0\u6216\u5206\u914d\u5f0f\u00a0salloc\u00a0\u7b49\u547d\u4ee4\u63d0\u4ea4\uff0c\u63d0\u4ea4\u540e\u53ef\u4ee5\u5229\u7528\u76f8\u5173\u547d\u4ee4\u67e5\u8be2\u4f5c\u4e1a\u72b6\u6001\u7b49</li> </ul>"},{"location":"Section/page-1/","title":"1.\u57fa\u672c\u547d\u4ee4","text":""},{"location":"Section/page-1/#11","title":"1.1\u5e38\u7528\u547d\u4ee4","text":"<p>module</p> <pre><code>module list: \u67e5\u770b\u76ee\u524d\u5b58\u5728\u7684\u6a21\u5757\n\nmodule avail/av: \u67e5\u770b\u53ef\u4ee5\u5b89\u88c5\u7684\u6a21\u5757\n\nmodule purge: \u79fb\u9664\u5f53\u524d\u6240\u6709\u6a21\u5757\n\nmodule load XXX: \u52a0\u8f7dXXX\u6a21\u5757\n</code></pre> <ul> <li>sacct:  \u663e\u793a\u6fc0\u6d3b\u7684\u6216\u5df2\u5b8c\u6210\u4f5c\u4e1a\u6216\u4f5c\u4e1a\u6b65</li> <li>sbatch:  \u63d0\u4ea4\u4f5c\u4e1a\u811a\u672c\u4f7f\u5176\u8fd0\u884c\uff08\u6b64\u811a\u672c\u4e00\u822c\u4e5f\u53ef\u542b\u6709\u4e00\u4e2a\u6216\u591a\u4e2asrun\u547d\u4ee4\u542f\u52a8\u5e76\u884c\u4efb\u52a1\uff09</li> <li>scancel:  \u53d6\u6d88\u6392\u961f\u6216\u8fd0\u884c\u4e2d\u7684\u4f5c\u4e1a\u6216\u4f5c\u4e1a\u6b65</li> <li>scontrol: \u663e\u793a\u6216\u8bbe\u5b9aSlurm\u4f5c\u4e1a\u3001\u961f\u5217\u3001\u7ed3\u70b9\u7b49\u72b6\u6001</li> <li>sinfo: \u663e\u793a\u961f\u5217\u6216\u8282\u70b9\u72b6\u6001</li> <li>squeue: \u663e\u793a\u961f\u5217\u4e2d\u7684\u4f5c\u4e1a\u53ca\u4f5c\u4e1a\u6b65\u72b6\u6001</li> <li>srun: \u5b9e\u65f6\u4ea4\u4e92\u5f0f\u8fd0\u884c\u5e76\u884c\u4f5c\u4e1a\uff0c\u4e00\u822c\u7528\u4e8e\u6bb5\u65f6\u95f4\u6d4b\u8bd5\uff0c\u6216\u8005\u4e0esallcoc\u53casbatch\u7ed3\u5408</li> </ul>"},{"location":"Section/page-1/#12-sinfo","title":"1.2 Sinfo\u67e5\u770b\u96c6\u7fa4\u72b6\u6001","text":"<ul> <li>PARTITION\uff1a\u5206\u533a\uff0c\u63d0\u4ea4\u4f5c\u4e1a\u65f6\u63d0\u4ea4-p\u53c2\u6570\uff0c\u6765\u9009\u62e9\u5206\u533a\u6240\u5bf9\u5e94\u7684\u8ba1\u7b97\u8282\u70b9\uff0c\u5e26*\u4e3a\u9ed8\u8ba4\u8282\u70b9\uff0c\u5373\u4e0d\u6307\u5b9a\u5206\u533a\u9ed8\u8ba4\u63d0\u4ea4\u5230gpu</li> <li>TIMELIMIT\uff1a\u65f6\u95f4\u9650\u5236\uff0cinfinite\u4ee3\u8868\u5206\u533a\u4f5c\u4e1a\u65e0\u65f6\u95f4\u9650\u5236</li> <li>STATE\uff1adrain: \u6392\u7a7a\u72b6\u6001\uff0c\u8868\u793a\u8be5\u7c7b\u8282\u70b9\u4e0d\u518d\u5206\u914d\u5230\u5176\u4ed6\uff1b idle: \u7a7a\u95f2\u72b6\u6001\uff1b alloc: \u5b8c\u5168\u88ab\u5206\u914d\u72b6\u6001;   mix:\u90e8\u5206\u88ab\u5360\u7528\uff0c\u4f46\u662f\u4ecd\u6709\u53ef\u7528\u8d44\u6e90</li> </ul> options function case sinfo \u67e5\u770b\u5206\u533a\u72b6\u6001 sinfo -N \u67e5\u770b\u8282\u70b9\u72b6\u6001 sinfo -n node-name \u67e5\u770b\u6307\u5b9a\u8282\u70b9\u72b6\u6001"},{"location":"Section/page-1/#13-squeue","title":"1.3 squeue\u67e5\u8be2\u4f5c\u4e1a\u72b6\u6001","text":"<ul> <li>ST: R\u4e3a\u6b63\u5728\u8fd0\u884c\u4e2d\uff1bPD\u4e3a\u6392\u961f\u4e2d\uff1bS:\u6302\u8d77\uff1bCG: \u6b63\u5728\u9000\u51fa; CD:\u5df2\u5b8c\u6210</li> </ul> options function case squeue-l \u67e5\u770b\u4f5c\u4e1a\u7ec6\u8282\u4fe1\u606f squeue-n \u67e5\u770b\u6307\u5b9a\u8282\u70b9\u4fe1\u606f squeue-j \u67e5\u770b\u6307\u5b9a\u4f5c\u4e1a\u4fe1\u606f"},{"location":"Section/page-1/#14-scontrol","title":"1.4 scontrol\u67e5\u770b\u8fd0\u884c\u4f5c\u4e1a\u4fe1\u606f","text":"<p>\u4e0b\u56fe\u4e3a\u67e5\u770b\u8282\u70b9\u4e3acu01\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <ul> <li>CPUAlloc\uff1a\u5269\u4f59\u672a\u5206\u914dcpu\u6838\u5fc3\u6570</li> <li>AllocMem\uff1a \u5269\u4f59\u672a\u5206\u914d\u5185\u5b58</li> </ul> <p></p> <p>scontrol\u7684\u5176\u4ed6\u53c2\u6570\u9009\u9879\uff0c\u53ef\u901a\u8fc7scontrol--help\u67e5\u770b</p>"},{"location":"Section/page-2/","title":"2.\u63d0\u4ea4\u4f5c\u4e1a","text":""},{"location":"Section/page-2/#21","title":"2.1\u57fa\u672c\u6982\u5ff5","text":"<p>\u4e09\u79cd\u6a21\u5f0f</p> <p>\u6279\u5904\u7406\u4f5c\u4e1a\uff08\u91c7\u7528sbatch\u547d\u4ee4\u63d0\u4ea4\uff0c\u6700\u5e38\u7528\u65b9\u5f0f\uff09\uff1a</p> <ul> <li>\u5bf9\u4e8e\u6279\u5904\u7406\u4f5c\u4e1a\uff08\u63d0\u4ea4\u540e\u7acb\u5373\u8fd4\u56de\u8be5\u547d\u4ee4\u884c\u7ec8\u7aef\uff0c\u7528\u6237\u53ef\u8fdb\u884c\u5176\u5b83\u64cd\u4f5c\uff09\u4f7f \u7528sbatch\u547d\u4ee4\u63d0\u4ea4\u4f5c\u4e1a\u811a\u672c\uff0c\u4f5c\u4e1a\u88ab\u8c03\u5ea6\u8fd0\u884c\u540e\uff0c\u5728\u6240\u5206\u914d\u7684\u9996\u4e2a\u8282\u70b9\u4e0a\u6267\u884c\u4f5c \u4e1a\u811a\u672c\u3002\u5728\u4f5c\u4e1a\u811a\u672c\u4e2d\u4e5f\u53ef\u4f7f\u7528srun\u547d\u4ee4\u52a0\u8f7d\u4f5c\u4e1a\u4efb\u52a1\u3002\u63d0\u4ea4\u65f6\u91c7\u7528\u7684\u547d\u4ee4\u884c\u7ec8 \u7aef\u7ec8\u6b62\uff0c\u4e5f\u4e0d\u5f71\u54cd\u4f5c\u4e1a\u8fd0\u884c</li> </ul> <p>\u4ea4\u4e92\u5f0f\u4f5c\u4e1a\u63d0\u4ea4\uff08\u91c7\u7528srun\u547d\u4ee4\u63d0\u4ea4\uff09\uff1a</p> <ul> <li>\u8d44\u6e90\u5206\u914d\u4e0e\u4efb\u52a1\u52a0\u8f7d\u4e24\u6b65\u5747\u901a\u8fc7srun\u547d\u4ee4\u8fdb\u884c\uff1a\u5f53\u5728\u767b\u5f55shell\u4e2d\u6267\u884csrun\u547d\u4ee4\u65f6\uff0c srun\u9996\u5148\u5411\u7cfb\u7edf\u63d0\u4ea4\u4f5c\u4e1a\u8bf7\u6c42\u5e76\u7b49\u5f85\u8d44\u6e90\u5206\u914d\uff0c\u7136\u540e\u5728\u6240\u5206\u914d\u7684\u8282\u70b9\u4e0a\u52a0\u8f7d\u4f5c\u4e1a \u4efb\u52a1\u3002\u91c7\u7528\u8be5\u6a21\u5f0f\uff0c\u7528\u6237\u5728\u8be5\u7ec8\u7aef\u9700\u7b49\u5f85\u4efb\u52a1\u7ed3\u675f\u624d\u80fd\u7ee7\u7eed\u5176\u5b83\u64cd\u4f5c\uff0c\u5728\u4f5c\u4e1a\u7ed3 \u675f\u524d\uff0c\u5982\u679c\u63d0\u4ea4\u65f6\u7684\u547d\u4ee4\u884c\u7ec8\u7aef\u65ad\u5f00\uff0c\u5219\u4efb\u52a1\u7ec8\u6b62\u3002\u4e00\u822c\u7528\u4e8e\u77ed\u65f6\u95f4\u5c0f\u4f5c\u4e1a\u6d4b\u8bd5</li> </ul> <p>\u5b9e\u65f6\u5206\u914d\u6a21\u5f0f\u4f5c\u4e1a\uff08\u91c7\u7528salloc\u547d\u4ee4\u63d0\u4ea4\uff09\uff1a</p> <ul> <li>\u5206\u914d\u4f5c\u4e1a\u6a21\u5f0f\u7c7b\u4f3c\u4e8e\u4ea4\u4e92\u5f0f\u4f5c\u4e1a\u6a21\u5f0f\u548c\u6279\u5904\u7406\u4f5c\u4e1a\u6a21\u5f0f\u7684\u878d\u5408\u3002\u7528\u6237\u9700\u6307\u5b9a\u6240\u9700 \u8981\u7684\u8d44\u6e90\u6761\u4ef6\uff0c\u5411\u8d44\u6e90\u7ba1\u7406\u5668\u63d0\u51fa\u4f5c\u4e1a\u7684\u8d44\u6e90\u5206\u914d\u8bf7\u6c42\u3002\u63d0\u4ea4\u540e\uff0c\u4f5c\u4e1a\u5904\u4e8e\u6392\u961f\uff0c \u5f53\u7528\u6237\u8bf7\u6c42\u8d44\u6e90\u88ab\u6ee1\u8db3\u65f6\uff0c\u5c06\u5728\u7528\u6237\u63d0\u4ea4\u4f5c\u4e1a\u7684\u8282\u70b9\u4e0a\u6267\u884c\u7528\u6237\u6240\u6307\u5b9a\u7684\u547d\u4ee4\uff0c \u6307\u5b9a\u7684\u547d\u4ee4\u6267\u884c\u7ed3\u675f\u540e\uff0c\u8fd0\u884c\u7ed3\u675f\uff0c\u7528\u6237\u7533\u8bf7\u7684\u8d44\u6e90\u88ab\u91ca\u653e\u3002\u5728\u4f5c\u4e1a\u7ed3\u675f\u524d\uff0c\u5982 \u679c\u63d0\u4ea4\u65f6\u7684\u547d\u4ee4\u884c\u7ec8\u7aef\u65ad\u5f00\uff0c\u5219\u4efb\u52a1\u7ec8\u6b62</li> </ul> <pre><code>- salloc\u548csbatch\u6700\u4e3b\u8981\u7684\u533a\u522b\u662fsalloc\u547d\u4ee4\u8d44\u6e90\u8bf7\u6c42\u88ab\u6ee1\u8db3\u65f6\uff0c\u76f4\u63a5\u5728\u63d0\u4ea4\u4f5c\u4e1a\u7684\n\u8282\u70b9\u6267\u884c\u76f8\u5e94\u4efb\u52a1\uff0c\u800csbatch\u5219\u5f53\u8d44\u6e90\u8bf7\u6c42\u88ab\u6ee1\u8db3\u65f6\uff0c\u5728\u5206\u914d\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9\u4e0a\u6267\n\u884c\u76f8\u5e94\u4efb\u52a1\n- salloc\u5728\u5206\u914d\u8d44\u6e90\u540e\uff0c\u518d\u6267\u884c\u76f8\u5e94\u7684\u4efb\u52a1\uff0c\u5f88\u9002\u5408\u9700\u8981\u6307\u5b9a\u8fd0\u884c\u8282\u70b9\u548c\u5176\u5b83\u8d44\u6e90\n\u9650\u5236\uff0c\u5e76\u6709\u7279\u5b9a\u547d\u4ee4\u7684\u4f5c\u4e1a\n</code></pre>"},{"location":"Section/page-2/#22-sbatch","title":"2.2 \u6279\u5904\u7406\u6a21\u5f0fSBATCH","text":"slurm\u53c2\u6570 \u542b\u4e49 SPATCH -J name \u6307\u5b9a\u4f5c\u4e1a\u540d\u79f0 SPATCH -p cpu \u6307\u5b9a\u5206\u533a SPATCH -t \u8fd0\u884c\u65f6\u95f4\uff0c\u8d85\u51fa\u65f6\u95f4\u4f5c\u4e1a\u5c06\u88ab\u7ec8\u6b62 SPATCH -N 1 \u8282\u70b9\u6570\u91cf SPATCH -c 4 \u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u8981\u7684\u6838\u5fc3\u6570\uff0c\u9ed8\u8ba4\u4e3a1\uff0c\u591a\u7ebf\u7a0b\u9700\u66f4\u6539 SPATCH --cpis-per-task=4 \u5355\u8282\u70b9\u542f\u52a8\u7684\u8fdb\u7a0b\u6570\uff0c\u9ed8\u8ba4\u4e3a1\uff0c\u591a\u7ebf\u7a0b\u9700\u66f4\u6539 SPATCH -a 0-2 \u9635\u5217\u4f5c\u4e1a SBATCH -w cu[03-04] \u6307\u5b9a\u7533\u8bf7\u9700\u8981\u5305\u62ec\u7684\u8282\u70b9 SBATCH --mem 1G \u6307\u5b9a\u8282\u70b9\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f SBATCH --output \u8f93\u51fa\u6587\u4ef6 SBATCH --error \u62a5\u9519\u6587\u4ef6 <p>\u8fd9\u662f\u4e00\u4e2a\u540d\u4e3acpu.slurm\u7684\u4f5c\u4e1a\u811a\u672c\uff0c\u8be5\u811a\u672c\u5411cpu\u961f\u5217\u7533\u8bf71\u4e2a\u8282\u70b940\u6838,\u5e76\u5728\u4f5c\u4e1a\u5b8c\u6210\u65f6\u901a\u77e5\uff1b\u5728\u6b64\u4f5c\u4e1a\u6267\u884c\u7684\u547d\u4ee4\u662f/bin/hostname</p> <pre><code>#!/bin/bash\n\n#SBATCH --job-name=hostname\n#SBATCH --partition=cpu\n#SBATCH -N 1\n#SBATCH --mail-type=end\n#SBATCH --mail-user=YOU@EMAIL.COM\n#SBATCH --output=%j.out\n#SBATCH --error=%j.err\n\n/bin/hostname\n\n</code></pre> <p>sbatch cpu.slurm\u63d0\u4ea4\u4f5c\u4e1a</p>"},{"location":"Section/page-2/#23-srun","title":"2.3 \u4ea4\u4e92\u6a21\u5f0fsrun","text":"<p>srun\u7684\u4e00\u4e9b\u5e38\u7528\u547d\u4ee4\u9009\u9879</p> <pre><code>-N 3            \u6307\u5b9a\u8282\u70b9\u6570\u4e3a3\n-n 20           \u6307\u5b9a\u8fdb\u7a0b\u6570\u4e3a20\n-c 20           \u6307\u5b9a\u6bcf\u4e2a\u8fdb\u7a0b\uff08\u4efb\u52a1\uff09\u4f7f\u7528\u7684CPU\u6838\u4e3a20\n-p com          \u6307\u5b9a\u63d0\u4ea4\u4f5c\u4e1a\u5230com \u961f\u5217\n-w comput[1-2]  \u6307\u5b9a\u63d0\u4ea4\u4f5c\u4e1a\u5230comput1\u3001comput2\u8282\u70b9\n-x comput[1-2]  \u6392\u9664comput1\u3001comput2\u8282\u70b9\n-o out.log      \u6307\u5b9a\u6807\u51c6\u8f93\u51fa\u5230out.log\u6587\u4ef6\n-e err.log      \u6307\u5b9a\u91cd\u5b9a\u5411\u9519\u8bef\u8f93\u51fa\u5230err.log\u6587\u4ef6\n-J JOBNAME      \u6307\u5b9a\u4f5c\u4e1a\u540d\u4e3aJOBNAME\n-t 20           \u9650\u5236\u8fd0\u884c20\u5206\u949f\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <p>srun -p com -w comput[1-2] -N 2 -n 40 -t 20 A.exe</p> <pre><code>-p com         \u6307\u5b9a\u63d0\u4ea4\u4f5c\u4e1a\u5230com\u961f\u5217\uff1b\n-w comput[1-2] \u6307\u5b9a\u4f7f\u7528\u8282\u70b9comput[1-2]\uff1b\n-N 2           \u6307\u5b9a\u4f7f\u75282\u4e2a\u8282\u70b9\uff1b\n-n 40          \u6307\u5b9a\u8fdb\u7a0b\u6570\u4e3a40\uff1b\n-t 20          \u6307\u5b9a\u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4\u9650\u5236\u4e3a20\u5206\u949f\n</code></pre>"},{"location":"Section/page-2/#24-salloc","title":"2.4 \u5206\u914d\u6a21\u5f0fsalloc","text":"<p>salloc\u547d\u4ee4\u7528\u4e8e\u7533\u8bf7\u8282\u70b9\u8d44\u6e90\uff0c\u4e00\u822c\u7528\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>1.\u6267\u884csalloc -N 1 -p gpu,\u7533\u8bf71\u53f0\u670d\u52a1\u5668\u8d44\u6e90\uff1b\n2.\u6267\u884csqueue \u67e5\u770b\u5206\u914d\u5230\u7684\u8282\u70b9\u8d44\u6e90,\u6bd4\u5982\u5206\u914d\u5230g100;\n3.\u6267\u884cssh g100\u767b\u9646\u5230\u6240\u5206\u914d\u7684\u8282\u70b9\uff1b\n4.\u767b\u9646\u8282\u70b9\u540e\u53ef\u4ee5\u6267\u884c\u9700\u8981\u7684\u63d0\u4ea4\u547d\u4ee4\u6216\u7a0b\u5e8f\uff1b\n5.\u4f5c\u4e1a\u7ed3\u675f\u540e\uff0c\u6267\u884cscancel JOBID\u91ca\u653e\u5206\u914d\u6a21\u5f0f\u4f5c\u4e1a\u7684\u8282\u70b9\u8d44\u6e90\n</code></pre>"},{"location":"Section/page-3/","title":"3.\u5176\u4ed6\u547d\u4ee4","text":""},{"location":"Section/page-3/#_1","title":"\u5176\u4ed6\u5e38\u7528\u4f5c\u4e1a\u7ba1\u7406\u547d\u4ee4","text":"<pre><code>\u7ec8\u6b62\u4f5c\u4e1a\uff1ascancel job_id\n\n\u6302\u8d77\u6392\u961f\u4e2d\u5c1a\u672a\u8fd0\u884c\u7684\u4f5c\u4e1a\uff1ascontrol hold job_list\n\n\u7ee7\u7eed\u6392\u961f\u88ab\u6302\u8d77\u7684\u5c1a\u672a\u8fd0\u884c\u4f5c\u4e1a\uff1a scontrol release job_list\n\n\u91cd\u65b0\u8fd0\u884c\u4f5c\u4e1a\uff1ascontrol requeue job_list\n\n\u91cd\u65b0\u6302\u8d77\u4f5c\u4e1a\uff1ascontrol requeuehold job_list\n\n\u6700\u4f18\u5148\u7b49\u5f85\u8fd0\u884c\u4f5c\u4e1a\uff1ascontrol top job_id\n\n\u7b49\u5f85\u67d0\u4e2a\u4f5c\u4e1a\u8fd0\u884c\u5b8c\uff1ascontrol wait_job job_id\n\n\u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f\uff1ascontrol update SPECIFICATION\n</code></pre>"}]}